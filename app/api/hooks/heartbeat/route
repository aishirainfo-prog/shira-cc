import { ... } from '../../../../lib/hmac'
import { ... } from '../../../../lib/schemas'
import { ... } from '../../../../lib/store'
export const runtime = "nodejs";

export async function POST(req: Request) {
  const body = await req.json().catch(() => ({}));
  const hb = parseHeartbeat(body);
  setHeartbeat(hb);
  return NextResponse.json({ ok: true, saved: hb });
}

export async function GET() {
  return NextResponse.json({ last: getHeartbeat() });
}
